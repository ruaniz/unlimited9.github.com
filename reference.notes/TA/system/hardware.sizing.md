## Hardware Sizing

### CPU

#### OLTP/BATCH
구분 | 산정 항목 | 내용| 적용 범위 | 일반값
-- | -- | -- | -- | --
O1 | 분당 트랜잭션 수 | 산정 대상 서버에서의 분당 트랜잭션 발생 추정치의 합 | - | 업무 수 * 업무당 트랜잭션 수
O2 | 기본 tpmC 보정 | 실험 환경에서 측정한 tpmC 수치를 복잡한 실제 환경에 맞게 적용하기 위한 보정 | - | 5	
O3 | 피크타임 부하 보정 | 업무가 과중한 시간대에 시스템이 원활하게 운영될 수 있도록 피크타임을 고려한 보정 | 1.2 ~ 1.5 | 1.3	
O4 | 데이터베이스 크기 보정 | 데이터베이스 테이블의 레코드 건수와 전체 데이터베이스 볼륨을 고려한 보정 | 1.5 ~ 2.0 | 1.7	
O5 | 애플리케이션 구조 보정 | 애플리케이션의 구조와 요구되는 응답 시간에 따른 성능 차이를 감안한 보정 | 1.1 ~ 1.5 | 1.2	
O6 | 애플리케이션 부하 보정 | 온라인 작업을 수행하는 피크타임에 배치 작업 등이 동시에 이루어지는 경우를 감안한 보정 | 1.3 ~ 2.2 | 1.7	
O7 | 클러스터 보정 | 클러스터 환경에서 장애 발생 시를 대비한 보정 | 2-NODE : 1.4 ~ 1.5, 3-NODE :1.3 | -	
O8 | 시스템 여유율 | 예기치 못한 업무의 증가 등을 위한 여유율 | - | 1.3	
O9 | 시스템 목표 활용률 | 시스템의 안정적인 운영을 전제로 한 CPU 활용률 | - | 0.7  

**CPU(tpmC 단위)** = (분당 트랜잭션 수 * 기본 tpmC 보정 * 피크타임 부하 보정 * DB 크기 보정 * 애플리케이션 구조 보정 * 애플리케이션 부하 보정 * 클러스터 보정 * 시스템 여유율) / 시스템 목표 활용률

#### 보정기준
<details>
<summary>more ...</summary>
<div markdown="1">
  
`피크타임 부하 보정`

구분 | 적용값 | 설명
-- | -- | --
상 | 1.5 | 특정시간이나 특정일에 매우 과도한 부하가 걸리는 경우
중 | 1.4 | 특정 마감일이 있는 경우
하 | 1.3 | 특정 시간대에 매일 혹은 매주 피크타임이 있는 경우
기타 | 1.2 | 피크타임이 존재하나 부하 차이가 크지 않은 경우

`데이터베이스 크기 보정(레코드건수 : million)`

DB 크기 | ~ 8 | ~ 32 | ~ 128 | ~ 256 | 256 이상
-- | -- | -- | -- | -- | --
50Gbyte 미만 | 1.50 | 1.55 | 1.60 | 1.65 | 1.70
500Gbyte 미만 | 1.60 | 1.65 | 1.70 | 1.75 | 1.80
1Tbyte 미만 | 1.70 | 1.75 | 1.80 | 1.85 | 1.90
2Tbyte 미만 | 1.80 | 1.85 | 1.90 | 1.95 | 1.95
2Tbyte 이상 | 1.85 | 1.90 | 1.90 | 1.95 | 2.00

`애플리케이션 구조 보정`

응답 시간 | 1초 | 2초 | 3초 | 4초 | 5초 이상
-- | -- | -- | -- | -- | --
적용값 | 1.50 | 1.35 | 1.20 | 1.10 | 1(적용안함)

`애플리케이션 부하 보정`
 
구분 | 적용값 | 설명
-- | -- | --
상 | 1.9 ~ 2.2 | 배치성 작업 등 추가 작업이 많이 이루어지는 경우
중 | 1.6 ~ 1.8 | 온라인 트랜잭션에 일부 배치 작업이 이루어지는 경우
하 | 1.3 ~ 1.5 | 온라인 트랜잭션 외에 배치성 작업 등 추가 작업이 없는 경우

</div>
</details>

#### WEB/WAS
구분 | 산정 항목 | 내용| 적용 범위 | 일반값
-- | -- | -- | -- | --
S1 | 동시 사용자 수 | 소프트웨어나 시스템을 네트워크 상에서 동시에 사용하는 사용자 | - | 산정값
S2 | 사용자당 오퍼레이션 수 | 사용자 한 사람이 초당 발생시키는 오퍼레이션 수 | 3 ~ 6개 | 5개	
S3 | 기본 OPS 보정 | 실험 환경에서 측정한 ops 수치를 복잡한 실제 환경에 맞게 적용하기 위한 보정 | - | 3	
S4 | 업무 용도 보정 | 적용 대상 시스템 유형에 따른 보정치 | - | WEB : 0.7, WAS : 2	
S5 | 인터페이스 부하 보정 | 서버가 타 서버와 통신하게 될때 인터페이스에서 발생하는 부하를 고려한 보정 | 1.1 ~ 1.2 | 1.1	
S6 | 피크타임 부하 보정 | 갑자기 많은 접속으로 인해 부하가 발생하는 것을 해결하기 위한 보정 | 1.2 ~ 1.5 | 1.3	
S7 | 클러스터 보정 | 클러스터 환경에서 장애 발생 시를 대비한 보정 | 2-NODE : 1.4 ~ 1.5, 3-NODE :1.3 | -	
S8 | 시스템 여유율 | 시스템의 안정된 운영을 위한 보정 | - | 1.3	
S9 | 시스템 목표 활용률 | 시스템의 안정적인 운영을 전제로 한 CPU 활용률 | - | 0.7  
S10 | 단위보정 | 산정 결과를 max-jOPS 단위로 변환하는 위한 환산치 | 29 ~ 31 | 30  

**CPU(max-jOPS단위)** = (동시 사용자 수 * 사용자당 오퍼레이션 수 * 기본 OPS보정 * 업무 용도 보정 * 인터페이스 부하 보정 * 피크타임 부하 보정 * 클러스터 보정 * 시스템 여유율) / (시스템 목표 활용률*단위 보정)

#### 보정기준
<details>
<summary>more ...</summary>
<div markdown="1">

`사용자당 오퍼레이션 수`

적용값 | 설명
-- | --
3 | 웹서비스 위주 업무(복잡한 응용 로직이 아닌 조회 위주의 업무를 의미함)
4 | 웹서비스와 응용 로직 혼합되어 있으나 웹서비스 위주 업무
5 | 웹서비스와 응용 로직
6 | 응용 로직 위주의 업무

`업무 용도 보정`

적용값 | 설명
-- | --
0.7 | WEB 서버
2 | WAS 서버

`피크타임 부하 보정`

구분 | 적용값 | 설명
-- | -- | --
상 | 1.5 | 특정시간이나 특정일에 매우 과도한 부하가 걸리는 경우
중 | 1.4 | 특정한 마감일에 과도한 부하가 걸리는 경우
하 | 1.3 | 특정 시간대에 매일 혹은 매주 피크타임이 있는 경우
기타 | 1.2 | 피크타임이 존재하나 부하 차이가 크지 않은 경우

`단위보정`

적용값 | 설명
-- | --
29 | X86 서버
30 | 서버 형태 미정(일반값)
31 | Unix 서버

</div>
</details>


### MEMORY
구분 | 산정 항목 | 내용| 적용 범위 | 일반값
-- | -- | -- | -- | --
M1 | 시스템 영역 | OS, DBMS 엔진, 미들웨어 엔진 , 기타 유틸리티 등의 소요 공간 | - | 산정값
M2 | 사용자당 필요 메모리 | 애플리케이션, 미들웨어, DBMS의 사용에 필요한 사용자당 메모리 | 1MB ~ 3MB | 2MB	
M3 | 동시 사용자수 | 소프트웨어나 시스템을 네트워크상에서 동시에 사용하는 사용자 | - | 산정값	
M4 | OS 버퍼 캐시 | 보정 처리 속도를 향상시키기 위해 일정량의 데이터를 임시로 모아 놓은 기억 장소를 위한 보정 | 1.1 ~ 1.3 | 1.15  
M5 | 미들웨어 버퍼 캐시 | 메모리 DBMS의 공유메모리, WAS의 heap size 등 미들웨어에서 사용하는 캐시 영역 | - | 산정값	
M6 | 시스템 여유율 | 시스템의 안정된 운영을 위한 보정 | - | 1.3	

**메모리(MB단위)** = {시스템 영역 + (사용자당 필요 메모리 * 사용자 수) + 미들웨어 버퍼 캐시 메모리} * 버퍼 캐시 보정 * 시스템 여유율

### DISK
구분 | 산정 항목 | 내용| 적용 범위 | 일반값
-- | -- | -- | -- | --
D1 | 시스템OS 영역 | 운영체제 및 시스템 소프트웨어 등을 위한 영역한 영역 | - | 산정값
D1 | 응용 프로그램 영역 | 미들웨어 및 응용 소프트웨어 영역, 데이터베이스 설치 영역, 기타 유틸리티 설치 영역 등 응용 프로그램을 위한 영역 | - | 산정값
D1 | SWAP 영역 | 시스템 장애 시의 Dump역할 수행과 메모리 대용의 효율적인 Swapping을 수행하기 위한 작업 공간 | - | 산정값
D1 | 파일 시스템 오버헤드 | 일반 사용자 관리 영역을 위한 슈퍼 유저의 관리 공간 및 I-node Overhead, 슈퍼블럭, 실린더 그룹 등 파일관리 공간 | - | 산정값
D1 | 시스템/데이터 디스크 여유율 | 시스템의 안정된 운영을 위한 보정으로 업무의 중요도나 긴급도를 감안하여 적용 | 1.2 ~ 1.5 | 1.3	
D1 | 데이터 영역 | 실제 필요한 데이터량 | - | 산정값  
D1 | 백업 영역 | 데이터와 데이터의 변경 내역 정보 등의 백업을 위한 공간 | - | 산정값  
D1 | RAID 여유율 | RAID 디스크가 도입될 경우 데이터 보호를 위한 패러티 영역으로 사용되는 공간을 위한 보정 | - | RAID1/RAID0+1/RAID1+0: 2.0, RAID5: 1.3, RAID6: 1.4

**시스템 디스크** = (시스템 OS 영역 + 응용 프로그램 영역 + SWAP 영역) * 파일 시스템 오버헤드 * 시스템 디스크 여유율 * RAID 여유율
**데이터 디스크** = (데이터 영역 + 백업 영역) * 파일 시스템 오버헤드 * 데이터 디스크 여유율 * RAID 여유율

## 9. Appendix

### reference site

* 정보통신단체표준(TTAS) : TTAK.KO-10.0292/R2 (http://www.tta.or.kr/)  
http://www.tta.or.kr/data/ttas_view.jsp?rn=1&pk_num=TTAK.KO-10.0292/R2&nowSu=1

* TPC  
http://www.tpc.org/

* Standard Performance Evaluation Corporation - OSG and HPG Benchmark Results Search  
http://www.spec.org/results_search.html
