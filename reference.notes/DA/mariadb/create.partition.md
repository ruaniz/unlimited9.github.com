## patitions


#### create table with partition
```
CREATE TABLE MOB_IP_INTRCP_HST (
    INTRCP_SEQ   INT AUTO_INCREMENT COMMENT '차단순서|IP의 차단 순서|AUTO_INCREMENT|',
    INTRCP_DT    INT                                     		NOT NULL COMMENT '차단일',
    INTRCP_TP    VARCHAR(2)                              		NOT NULL COMMENT '차단구분|IP차단구분|01:컨버젼, 02:클릭, 03:아이커버|',
    INTRCP_IP    INT UNSIGNED                            		NOT NULL COMMENT '차단IP|차단IP주소|저장:INET_ATON(''IP''), 조회:INET_NTOA(숫자)|',
    USER_UNQ_KEY VARCHAR(8)                              		NOT NULL COMMENT '사용자고유키|사용자고유키, 랜덤의 숫자형 데이터||',
    REG_USER_ID  VARCHAR(30) DEFAULT 'ADMIN'             	NOT NULL COMMENT '등록사용자ID|등록사용자ID를 기록|ADMEMBER.USERID|',
    REG_DTTM     DATETIME    DEFAULT CURRENT_TIMESTAMP() 	NOT NULL COMMENT '등록일자|등록시간을 기록||',
    ALT_USER_ID  VARCHAR(30)                             		NULL COMMENT '수정사용자ID|수정사용자ID를 기록|ADMEMBER.USERID|',
    ALT_DTTM     DATETIME                                		NULL COMMENT '수정일자|수정시간을 기록||',
    PRIMARY KEY (INTRCP_SEQ, INTRCP_DT)
)
--PARTITION BY RANGE (INTRCP_DT) (
--	PARTITION MOB_IP_INTRCP_HST_201911_1 VALUES LESS THAN (20191111),
--	PARTITION MOB_IP_INTRCP_HST_201911_2 VALUES LESS THAN (20191121),
--	PARTITION MOB_IP_INTRCP_HST_201911_3 VALUES LESS THAN (20191201),
--	PARTITION MOB_IP_INTRCP_HST_201912_1 VALUES LESS THAN MAXVALUE
--)
COMMENT 'IP차단이력|IP차단 이력||';
```
#### add partition to existing table
```
ALTER TABLE MOB_IP_INTRCP_HST PARTITION BY RANGE (INTRCP_DT) (
	PARTITION MOB_IP_INTRCP_HST_201911_1 VALUES LESS THAN (20191111),
	PARTITION MOB_IP_INTRCP_HST_201911_2 VALUES LESS THAN (20191121),
	PARTITION MOB_IP_INTRCP_HST_201911_3 VALUES LESS THAN (20191201),
	PARTITION MOB_IP_INTRCP_HST_201912_1 VALUES LESS THAN MAXVALUE
);
```

>Error Code: 1503  
>A PRIMARY KEY must include all columns in the table's partitioning function

#### add partition
```
ALTER TABLE MOB_IP_INTRCP_HST ADD PARTITION (
	PARTITION MOB_IP_INTRCP_HST_201911_2 VALUES LESS THAN (20191121)
);
```

#### drop partition
```
ALTER TABLE MOB_IP_INTRCP_HST DROP PARTITION MOB_IP_INTRCP_HST_201911_1;
```

#### split partition
```
ALTER TABLE MOB_IP_INTRCP_HST REORGANIZE PARTITION MOB_IP_INTRCP_HST_201912_1 INTO (
	PARTITION MOB_IP_INTRCP_HST_201912_1 VALUES LESS THAN (20191211),
	PARTITION MOB_IP_INTRCP_HST_201912_2 VALUES LESS THAN MAXVALUE
);
```

#### merge partition
```
ALTER TABLE MOB_IP_INTRCP_HST REORGANIZE PARTITION MOB_IP_INTRCP_HST_201911_1, MOB_IP_INTRCP_HST_201911_2 INTO (
	PARTITION MOB_IP_INTRCP_HST_201911_12 VALUES LESS THAN (20191121)
);
```

#### partition types
> Partition by Range  
> Partition by List  
> Partition by Hash  
> Partition by Key

#### select partitions
```
SELECT *
FROM INFORMATION_SCHEMA.PARTITIONS
WHERE PARTITIONS.TABLE_SCHEMA = 'dreamsearch' AND TABLE_NAME = 'MOB_IP_INTRCP_HST'
```



